<!DOCTYPE html>
<html>
    <head>
        <link href="http://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
        <link type="text/css" rel="stylesheet" href="css/materialize.min.css"  media="screen,projection"/>
        <meta name="format-detection" content="telephone=no">
        <meta name="msapplication-tap-highlight" content="no">
        <meta name="viewport" content="user-scalable=no, initial-scale=1, maximum-scale=1, minimum-scale=1, width=device-width">
        <title>QRCode Reader APP</title>
        <link rel="stylesheet" href="css/backbone.css">
    </head>
    <body>
                      <div class="navbar-fixed">
                          <nav>
                            <div class="nav-wrapper">
                                <center><a>QR</a></center>
                              <ul id="nav-mobile" class="left hide-on-med-and-down">
                          </ul>
                      </div>
                  </nav>
              </div>

        <h5 class="center-align" style="margin-top: 20px;"><img src="Img/qr-code.png" alt="Analog Logo" height="100" width="100"></h5>

            <div data-role="main" class="ui-content">
                <p>
                    <center><a target="_blank" href="javascript:scan();" style="text-decoration: none"><button class="button button1">scan</button></a></center>
                </p>
            </div>
        </div>
<center><div id="qr"></div></center>


        <script src="https://code.jquery.com/jquery-2.1.4.min.js"></script>
        <script src="http://code.jquery.com/mobile/1.4.5/jquery.mobile-1.4.5.min.js"></script>
        <script type="text/javascript" src="cordova.js"></script>
        <script>
            function scan()
            {
                cordova.plugins.barcodeScanner.scan(
                    function (result) {
                        if(!result.cancelled)
                        {
                            if(result.format == "QR_CODE")
                            {

                                    var value = result.text;
                                    var data = localStorage.getItem("LocalData");
                                    console.log(data);
                                    data = JSON.parse(data);
                                    data[data.length] = value;
                                    localStorage.setItem("LocalData", JSON.stringify(data));
                                    alert("Cosyne");

                            }
                        }
                    },
                    function (error) {
                        alert("Scanning failed: " + error);
                    }
               );
            }
            var qr_code         = window.localStorage.getItem('LocalData');
            $('#qr').html(qr_code);
        </script>
    </body>
</html>
